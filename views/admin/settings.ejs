<% 
  var title = 'Site Settings';
  var page = 'settings';
%>
<%- include('../layout', { title, page, user, body: `
  <h1>Site Settings</h1>
  <%- include('../partials/card', { title: null, body: `
    <form method='POST' action='/api/settings'>
      ${settings.map(s => `
        <div class='form-group'>
          <label for='${s.setting_key}'>${s.setting_key.replace(/_/g, ' ').toUpperCase()}</label>
          <small class='text-muted'>${s.description || ''}</small>
          ${s.setting_value.length > 100 ? 
            `<textarea id='${s.setting_key}' name='${s.setting_key}' rows='4'>${s.setting_value}</textarea>` :
            `<input id='${s.setting_key}' type='text' name='${s.setting_key}' value='${s.setting_value}'>`
          }
        </div>
      `).join('')}
      <%- include('../partials/button', { label: 'Save All Settings', type: 'submit' }) %>
    </form>
  ` }) %>
  <%- include('../partials/card', { title: 'Add New Setting', body: `
    <form method='POST' action='/api/settings'>
      <%- include('../partials/form-group', { id: 'key', label: 'Setting Key', name: 'key', type: 'text', required: true }) %>
      <div class='form-group'>
        <label for='value'>Setting Value</label>
        <textarea id='value' name='value' required></textarea>
      </div>
      <%- include('../partials/form-group', { id: 'description', label: 'Description', name: 'description', type: 'text', required: false }) %>
      <%- include('../partials/button', { label: 'Add Setting', type: 'submit' }) %>
    </form>
  ` }) %>
` }) %>
