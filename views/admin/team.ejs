<% 
  var title = 'Manage Team';
  var page = 'team';
%>
<%- include('../layout', { title, page, user, body: `
  <h1>Manage Team Members</h1>
  <%- include('../partials/card', { title: null, body: `
    <%- include('../partials/button', { label: 'Add Team Member', type: 'button', attrs: 'id="showAddTeamBtn"' }) %>
    <div id="addForm" style="display: none; margin-top: 2rem;">
      <h3>Add Team Member</h3>
      <form method="POST" action="/api/team">
        <%- include('../partials/form-group', { id: 'name', label: 'Name', name: 'name', type: 'text', required: true }) %>
        <%- include('../partials/form-group', { id: 'role', label: 'Role', name: 'role', type: 'text', required: true }) %>
        <%- include('../partials/form-group', { id: 'timezone', label: 'Timezone', name: 'timezone', type: 'text', required: false }) %>
        <%- include('../partials/form-group', { id: 'email', label: 'Email', name: 'email', type: 'email', required: false }) %>
        <%- include('../partials/button', { label: 'Save Member', type: 'submit' }) %>
        <%- include('../partials/button', { label: 'Cancel', type: 'button', extraClass: 'btn-secondary', attrs: 'id="cancelAddTeamBtn"' }) %>
      </form>
    </div>
  ` }) %>
  <%- include('../partials/card', { title: 'Team Members', body: `
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Role</th>
          <th>Timezone</th>
          <th>Email</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        ${members.map(m => `
          <tr>
            <td>${m.name}</td>
            <td>${m.role}</td>
            <td>${m.timezone || '-'}</td>
            <td>${m.email || '-'}</td>
            <td>
              <a href="/admin/team/${m.id}/edit" class="btn btn-secondary">Edit</a>
              <button class="btn btn-danger delete-member" data-id="${m.id}">Delete</button>
            </td>
          </tr>
        `).join('')}
      </tbody>
    </table>
  ` }) %>
` }) %>
